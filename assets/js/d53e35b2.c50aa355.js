"use strict";(self.webpackChunkwasmbox_docs=self.webpackChunkwasmbox_docs||[]).push([[1736],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>f});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var m=n.createContext({}),l=function(e){var t=n.useContext(m),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},d=function(e){var t=l(e.components);return n.createElement(m.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,m=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=l(r),p=a,f=c["".concat(m,".").concat(p)]||c[p]||u[p]||o;return r?n.createElement(f,i(i({ref:t},d),{},{components:r})):n.createElement(f,i({ref:t},d))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=p;var s={};for(var m in t)hasOwnProperty.call(t,m)&&(s[m]=t[m]);s.originalType=e,s[c]="string"==typeof e?e:a,i[1]=s;for(var l=2;l<o;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},4433:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>m,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var n=r(7462),a=(r(7294),r(3905));const o={title:"Determinism",sidebar_position:1},i=void 0,s={unversionedId:"advanced/determinism",id:"advanced/determinism",title:"Determinism",description:"WebAssembly (WASM) is deterministic in that it guarantees that the execution of a given module with the same input values will always produce the same output values, regardless of the platform or implementation used to run the module. This means that the execution of a WebAssembly module is predictable and reproducible.",source:"@site/docs/advanced/determinism.md",sourceDirName:"advanced",slug:"/advanced/determinism",permalink:"/wasmbox/advanced/determinism",draft:!1,editUrl:"https://github.com/Placeholder-Software/Wasmbox/tree/master/docs/advanced/determinism.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Determinism",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Advanced",permalink:"/wasmbox/advanced/"},next:{title:"Runtime WASM Loading",permalink:"/wasmbox/advanced/runtime_wasm_loading"}},m={},l=[{value:"SIMD",id:"simd",level:2},{value:"WASI",id:"wasi",level:2},{value:"Threads",id:"threads",level:2}],d={toc:l};function c(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"WebAssembly (WASM) is deterministic in that it guarantees that the execution of a given module with the same input values will always produce the same output values, regardless of the platform or implementation used to run the module. This means that the execution of a WebAssembly module is predictable and reproducible. "),(0,a.kt)("p",null,"However, it is possible to beak the determinism guarantees of WASM through several features (",(0,a.kt)("a",{parentName:"p",href:"https://github.com/WebAssembly/design/blob/main/Nondeterminism.md"},"read more"),"):"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"SIMD"),(0,a.kt)("li",{parentName:"ul"},"WASI"),(0,a.kt)("li",{parentName:"ul"},"Threads")),(0,a.kt)("h2",{id:"simd"},"SIMD"),(0,a.kt)("p",null,"SIMD (Single Instruction Multiple Data) instructions can potentially bring a huge speedup to heavily mathematical code. However, the exact semantics of SIMD may differ slightly when run on different hardware platforms."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"To ensure deterministic execution across all platforms ensure that SIMD is ",(0,a.kt)("strong",{parentName:"p"},"disabled"),".")),(0,a.kt)("p",null,"To disable SIMD you must check the ",(0,a.kt)("a",{parentName:"p",href:"/wasmbox/reference/editor/import#5-compilation"},"importer precompile settings")," and also the ",(0,a.kt)("a",{parentName:"p",href:"/wasmbox/reference/code/engineconfig#simd"},"EngineConfig")," used an runtime."),(0,a.kt)("h2",{id:"wasi"},"WASI"),(0,a.kt)("p",null,"WASI (Web Assembly System Interface) provides access to system resources such as clocks, random numbers and the file system. All of these resources are non-deterministic by nature."),(0,a.kt)("p",null,"Wasmbox provides multiple implementations of most WASI features, some of which can be used to provide determinism. For example the ",(0,a.kt)("a",{parentName:"p",href:"/wasmbox/reference/code/WASI/random"},"Random Number Generator")," has two implementations: ",(0,a.kt)("a",{parentName:"p",href:"/wasmbox/reference/code/WASI/random#cryptorandomsource"},"CryptoRandomSource")," provides truly random numbers (non-deterministic) and the ",(0,a.kt)("a",{parentName:"p",href:"/wasmbox/reference/code/WASI/random#fastrandomsource"},"FastRandomSource")," provides pseudo random numbers from a seed value (deterministic)."),(0,a.kt)("h2",{id:"threads"},"Threads"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/WebAssembly/proposals/issues/14"},(0,a.kt)("inlineCode",{parentName:"a"},"wasm-threads"))," is a proposed extension to WASM which adds support for multiple execution threads. It is not supported within Wasmbox."))}c.isMDXComponent=!0}}]);
"use strict";(self.webpackChunkwasmbox_docs=self.webpackChunkwasmbox_docs||[]).push([[1736],{3905:(e,t,r)=>{r.d(t,{Zo:()=>l,kt:()=>f});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var m=n.createContext({}),c=function(e){var t=n.useContext(m),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},l=function(e){var t=c(e.components);return n.createElement(m.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,m=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=c(r),u=a,f=d["".concat(m,".").concat(u)]||d[u]||p[u]||o;return r?n.createElement(f,i(i({ref:t},l),{},{components:r})):n.createElement(f,i({ref:t},l))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=u;var s={};for(var m in t)hasOwnProperty.call(t,m)&&(s[m]=t[m]);s.originalType=e,s[d]="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},4433:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>m,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var n=r(7462),a=(r(7294),r(3905));const o={title:"Determinism"},i=void 0,s={unversionedId:"advanced/determinism",id:"advanced/determinism",title:"Determinism",description:"Determinism is a core design goal of assembly, the same WASM code should produce the same results when executed on any platform. You can read more about the design of determinism in WebAssembly here.",source:"@site/docs/advanced/determinism.md",sourceDirName:"advanced",slug:"/advanced/determinism",permalink:"/wasmbox/advanced/determinism",draft:!1,editUrl:"https://github.com/Placeholder-Software/Wasmbox/tree/master/docs/advanced/determinism.md",tags:[],version:"current",frontMatter:{title:"Determinism"},sidebar:"tutorialSidebar",previous:{title:"Custom IWasmAsset",permalink:"/wasmbox/advanced/customwasmasset"},next:{title:"Reference Docs",permalink:"/wasmbox/category/reference-docs"}},m={},c=[{value:"SIMD",id:"simd",level:2},{value:"WASI",id:"wasi",level:2}],l={toc:c};function d(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},l,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Determinism is a core design goal of assembly, the same WASM code should produce the same results when executed on any platform. You can read more about the design of determinism in WebAssembly ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/WebAssembly/design/blob/main/Nondeterminism.md"},"here"),"."),(0,a.kt)("p",null,"Within Wasmbox there are a two main sources of non-determinism:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"SIMD"),(0,a.kt)("li",{parentName:"ul"},"WASI")),(0,a.kt)("h2",{id:"simd"},"SIMD"),(0,a.kt)("p",null,"SIMD (Single Instruction Multiple Data) instructions can potentially bring a huge speedup to heavily mathematical code. However, the exact semantics of SIMD may differ slightly when run on different hardware platforms."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"To ensure deterministic execution across all platforms ensure that SIMD is ",(0,a.kt)("strong",{parentName:"p"},"disabled"),".")),(0,a.kt)("p",null,"To disable SIMD you must check the ",(0,a.kt)("a",{parentName:"p",href:"/wasmbox/reference/editor/import#4-compilation"},"importer precompile settings")," and also the ",(0,a.kt)("a",{parentName:"p",href:"/wasmbox/reference/code/engineconfig#simd"},"EngineConfig")," used an runtime."),(0,a.kt)("h2",{id:"wasi"},"WASI"),(0,a.kt)("p",null,"WASI (Web Assembly System Interface) provides access to system resources such as clocks, random numbers and the file system. All of these resources are non-deterministic by."),(0,a.kt)("p",null,"Wasmbox provides multiple implementations of most WASI features, some of which can be used to provide determinism. For example the ",(0,a.kt)("a",{parentName:"p",href:"/wasmbox/reference/code/WASI/random"},"Random Number Generator")," has two implementations: ",(0,a.kt)("a",{parentName:"p",href:"/wasmbox/reference/code/WASI/random#cryptorandomsource"},"CryptoRandomSource")," provides truly random numbers (non-deterministic) and the ",(0,a.kt)("a",{parentName:"p",href:"/wasmbox/reference/code/WASI/random#fastrandomsource"},"FastRandomSource")," provides pseudo random numbers from a seed value (deterministic)."))}d.isMDXComponent=!0}}]);